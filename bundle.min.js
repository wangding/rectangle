function Rectangle(e,t){var r=Number(e),i=Number(t);function a(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}this.area=function(){return a(r*i,2)},this.perimeter=function(){return a(2*(r+i),2)}}function validate(e){var t={isOK:!1,reason:""};return""===e?(t.reason="不能为空！",t):/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-]?\d+)?$/.test(e)?Number(e)<0?(t.reason="必须大于零",t):(t.isOK=!0,t):(t.reason="必须是数值",t)}function isLegalKey(e,t,r){if(/[abcdf-zABCDF-Z`~!@#$%^&*()=_+[\]{}|;:'",<>/?\\]/.test(e))return!1;if("."===e){if(0===r)return!1;if(-1!==t.indexOf("."))return!1;if(r>0&&/[-eE]/.test(t.slice(0,r)))return!1}if("e"===e||"E"===e){if(0===r)return!1;if(-1!==t.indexOf("e")||-1!==t.indexOf("E"))return!1;if(r>0&&/[-.]/.test(t.slice(r-1,r)))return!1;if(-1!==t.slice(r,t.length).indexOf("."))return!1}if("-"===e){if(0===r)return!1;if(r>0&&/[0-9.]/.test(t.slice(r-1,r)))return!1;if(r>0&&-1!==t.indexOf("-"))return!1}return!0}$(()=>{let e=$("#width"),t=$("#height"),r=$("#calculate"),i=$("#perimeter"),a=$("#area"),n=$("#width-validate"),l=$("#height-validate"),s=!1;$forkMeGH.show("https://github.com/wangding/rectangle"),$bszPageFooter.show("body"),e.focusout(()=>{let t=validate(e.val());s=t.isOK,t.isOK?n.html(""):(n.html("宽度"+t.reason),e.select())}),e.keypress(e=>{isLegalKey(e.key,e.target.value,e.target.selectionStart)||e.preventDefault()}),t.focusout(()=>{let e=validate(t.val());s=e.isOK,e.isOK?l.html(""):(l.html("高度"+e.reason),t.select())}),t.keypress((function(e){isLegalKey(e.key,e.target.value,e.target.selectionStart)||e.preventDefault()})),r.click(()=>{if(!s)return;let r=new Rectangle(e.val(),t.val());i.val(r.perimeter()),a.val(r.area())})});